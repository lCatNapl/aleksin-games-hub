<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ ALEKSIN GAMES HUB</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(-45deg, #0f0f23, #1a1a2e, #16213e, #0f3460);
            background-size: 400% 400%; animation: gradientShift 15s ease infinite;
            height: 100vh; overflow: hidden; position: relative;
        }
        @keyframes gradientShift { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%}}
        .stars {position:fixed;top:0;left:0;width:100%;height:100%;background-image:radial-gradient(2px 2px at 20px 30px,#eee,transparent),radial-gradient(2px 2px at 40px 70px,rgba(255,255,255,.8),transparent),radial-gradient(1px 1px at 90px 40px,#fff,transparent),radial-gradient(1px 1px at 130px 80px,rgba(255,255,255,.6),transparent);background-repeat:repeat;background-size:200px 100px;animation:twinkle 3s linear infinite;pointer-events:none}
        @keyframes twinkle {0%,100%{opacity:.5}50%{opacity:1}}
        .container {max-width:1400px;margin:0 auto;padding:20px;display:flex;flex-direction:column;height:100vh;position:relative;z-index:1}
        .header {text-align:center;color:#44ff44;text-shadow:0 0 20px #44ff44;margin-bottom:30px;animation:glow 2s ease-in-out infinite alternate}
        @keyframes glow {from{text-shadow:0 0 20px #44ff44}to{text-shadow:0 0 30px #44ff44,0 0 40px #44ff44}}
        h1 {font-size:clamp(2.5rem,6vw,5rem);font-weight:900;margin-bottom:10px}
        #status {font-size:1.8rem;padding:20px 40px;border-radius:50px;background:linear-gradient(45deg,rgba(68,255,68,.3),rgba(0,255,0,.2));border:3px solid #44ff44;backdrop-filter:blur(15px);display:inline-block;box-shadow:0 10px 40px rgba(68,255,68,.3)}
        .mega-buttons {display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin:30px 0}
        .btn {padding:20px 40px;border:none;border-radius:50px;font-family:'Orbitron',sans-serif;font-weight:900;font-size:1.3rem;cursor:pointer;transition:all .4s ease;background:linear-gradient(45deg,#44ff44,#00ff88);color:#000;box-shadow:0 15px 45px rgba(68,255,68,.5);position:relative;overflow:hidden}
        .btn::before {content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .6s}
        .btn:hover::before {left:100%}
        .btn:hover {transform:translateY(-8px) scale(1.08);box-shadow:0 30px 70px rgba(68,255,68,.7)}
        .btn:active {transform:translateY(-4px) scale(1.04)}
        .logout-btn {background:linear-gradient(45deg,#ff4444,#ff8888);color:#fff;box-shadow:0 15px 45px rgba(255,68,68,.5)}
        .logout-btn:hover {box-shadow:0 30px 70px rgba(255,68,68,.7)}
        .games-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(380px,1fr));gap:35px;margin-top:35px}
        .game-card {background:linear-gradient(145deg,rgba(26,26,42,.97),rgba(42,42,68,.97));border:3px solid rgba(68,255,68,.6);border-radius:35px;padding:50px;text-align:center;cursor:pointer;transition:all .5s cubic-bezier(.25,.46,.45,.94);backdrop-filter:blur(25px);position:relative;overflow:hidden}
        .game-card::before {content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(68,255,68,.4),transparent);transition:left .7s}
        .game-card:hover::before {left:100%}
        .game-card:hover {transform:translateY(-25px) scale(1.04);border-color:#44ff44;box-shadow:0 35px 90px rgba(68,255,68,.6)}
        .game-title {color:#44ff44;font-size:2.2rem;font-weight:900;margin-bottom:20px;text-shadow:0 0 15px #44ff44}
        .game-desc {color:#88ff88;line-height:1.7;font-size:1.2rem}
        .dashboard-grid {display:grid;grid-template-columns:1fr 1fr;gap:35px;margin-top:35px}
        .leaderboard,.tournament {background:linear-gradient(145deg,rgba(20,20,40,.97),rgba(40,40,80,.97));border-radius:30px;padding:40px;margin:25px 0;border:2px solid rgba(68,255,68,.5)}
        .list-item {display:flex;justify-content:space-between;padding:20px;background:rgba(68,255,68,.15);margin:12px 0;border-radius:20px;border-left:5px solid #44ff44;backdrop-filter:blur(10px);transition:all .3s ease}
        .list-item:hover {transform:translateX(10px);background:rgba(68,255,68,.25)}
        .modal {display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);backdrop-filter:blur(15px);z-index:1000}
        .modal-content {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(145deg,#1a1a2e,#16213e);border-radius:35px;padding:60px;border:4px solid #44ff44;width:90%;max-width:550px;box-shadow:0 40px 120px rgba(68,255,68,.6)}
        .input-field {width:100%;padding:25px;margin:25px 0;border:3px solid #44ff44;border-radius:30px;background:rgba(0,0,0,.6);color:#fff;font-family:'Orbitron',sans-serif;font-size:1.3rem;backdrop-filter:blur(15px);transition:all .3s ease}
        .input-field:focus {outline:none;border-color:#00ff88;box-shadow:0 0 20px rgba(0,255,136,.5);transform:scale(1.02)}
        .modal-buttons {display:flex;gap:25px;justify-content:center;margin-top:35px}
        canvas {border:4px solid #44ff44;border-radius:25px;background:#000;display:block;margin:25px auto;box-shadow:0 20px 60px rgba(68,255,68,.4)}
        @media (max-width:768px) {.games-grid,.dashboard-grid {grid-template-columns:1fr}.modal-content {padding:40px;margin:20px}.container {padding:15px}}
    </style>
</head>
<body class="stars">
    <div class="container">
        <div class="header">
            <h1>üéÆ ALEKSIN GAMES HUB</h1>
            <div id="status">üî• –ö–ù–û–ü–ö–ò –ù–ê–í–°–ï–ì–î–ê!</div>
            <div class="mega-buttons">
                <button class="btn demo-login" data-user="test">üöÄ –î–ï–ú–û test</button>
                <button class="btn demo-login" data-user="player1">üöÄ –î–ï–ú–û player1</button>
                <button class="btn" onclick="showModal('login')">üîë –í—Ö–æ–¥</button>
                <button class="btn" onclick="showModal('register')">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>
            <button id="logout" class="btn logout-btn" style="display:none">üö™ –í—ã—Ö–æ–¥</button>
        </div>

        <div id="gamesMenu" class="games-grid" style="display:grid">
            <div class="game-card" onclick="loadSnakeGame()">
                <div class="game-title">üêç –ó–º–µ–π–∫–∞ –ü—Ä–æ</div>
                <div class="game-desc">–°–≤–∞–π–ø—ã üì± ‚Ä¢ WASD ‚Ä¢ –ì—Ä–∞–¥–∏–µ–Ω—Ç ‚Ä¢ –¢–µ–ª–µ–ø–æ—Ä—Ç ‚Ä¢ –†–µ–∫–æ—Ä–¥—ã</div>
            </div>
            <div class="game-card" onclick="loadGuessGame()">
                <div class="game-title">üéØ –£–≥–∞–¥–∞–π 1-10000</div>
                <div class="game-desc">üî• –û—á–µ–Ω—å –±–ª–∏–∑–∫–æ! ‚Ä¢ –ë–µ–∑–ª–∏–º–∏—Ç ‚Ä¢ –¢–æ—á–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ ‚Ä¢ –¢–æ–ø –æ—á–∫–∏</div>
            </div>
        </div>

        <div id="dashboard" class="dashboard-grid" style="display:grid;grid-template-columns:1fr 1fr;gap:35px">
            <div class="leaderboard">
                <h3 style="color:#44ff44;margin-bottom:25px;font-size:1.8rem">üèÜ –¢–æ–ø-10 –∏–≥—Ä–æ–∫–æ–≤</h3>
                <div id="leaderboard-list">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
            <div class="tournament">
                <h3 style="color:#ffaa00;margin-bottom:25px;font-size:1.8rem">‚öîÔ∏è –¢—É—Ä–Ω–∏—Ä (24—á)</h3>
                <div id="tournament-list">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>

    <div id="authModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">üîë –í—Ö–æ–¥</h2>
            <input type="text" class="input-field" id="username" placeholder="üë§ –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" maxlength="20">
            <input type="password" class="input-field" id="password" placeholder="üîí –ü–∞—Ä–æ–ª—å" maxlength="50">
            <div class="modal-buttons">
                <button class="btn btn-primary" id="submit-btn">üöÄ –í–æ–π—Ç–∏ / –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <button class="btn btn-secondary" onclick="closeAuth()">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        let currentGame='',gameInterval=null,snake={x:20,y:20,dx:1,dy:0,cells:[],maxCells:4},food={x:15,y:15},secretNumber=0,attempts=0,leaderboardInterval;
        
        // üî• –ú–ì–ù–û–í–ï–ù–ù–´–ô –°–¢–ê–†–¢ + 10x –ù–ï–£–ù–ò–ß–¢–û–ñ–ò–ú–´–ï –ö–ù–û–ü–ö–ò
        window.addEventListener('load',()=>{console.log('üéÆ –ö–ù–û–ü–ö–ò –ù–ê–í–°–ï–ì–î–ê!');document.getElementById('status').innerHTML='üî• –ö–ù–û–ü–ö–ò –ù–ê–í–°–ï–ì–î–ê!';leaderboardInterval=setInterval(()=>{loadLeaderboard();loadTournament()},30000);loadLeaderboard();loadTournament();initAllButtons();setInterval(initAllButtons,500)});
        
        // üî• 10x –ù–ï–£–ù–ò–ß–¢–û–ñ–ò–ú–´–ï –ö–ù–û–ü–ö–ò ‚Äî –ù–ò–ö–û–ì–î–ê –ù–ï –°–õ–û–ú–ê–Æ–¢–°–Ø
        function initAllButtons(){document.querySelectorAll('.btn').forEach(btn=>{if(!btn.dataset.fixed){btn.dataset.fixed='true';btn.onclick=e=>clickHandler(btn,e);btn.onmousedown=e=>clickHandler(btn,e);btn.ontouchstart=e=>clickHandler(btn,e);btn.addEventListener('click',e=>clickHandler(btn,e));btn.addEventListener('pointerdown',e=>clickHandler(btn,e));btn.addEventListener('touchend',e=>clickHandler(btn,e));btn.style.touchAction='manipulation'}});initDemoButtons();initGameButtons()}
        
        function clickHandler(btn,e){e.preventDefault();e.stopPropagation();const text=btn.textContent;if(text.includes('–î–ï–ú–û')){demoLogin(btn.dataset.user);return}if(text.includes('–í–æ–π—Ç–∏')){submitAuth();return}btn.onclick()}
        
        function initDemoButtons(){document.querySelectorAll('.demo-login').forEach(btn=>{if(!btn.dataset.handlers){btn.dataset.handlers='true';btn.onclick=()=>demoLogin(btn.dataset.user);btn.onmousedown=()=>demoLogin(btn.dataset.user);btn.ontouchstart=()=>demoLogin(btn.dataset.user)}})}
        
        // üî• –î–ï–ú–û –õ–û–ì–ò–ù ‚Äî 1 –ö–õ–ò–ö = –í–•–û–î
        async function demoLogin(username){try{await fetch('/register',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({username,password:'123456'})});await fetch('/login',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({username,password:'123456'})});document.getElementById('status').innerHTML=`üëã ${username} ‚úì`;document.getElementById('logout').style.display='inline-block';document.getElementById('logout').dataset.fixed='true';loadLeaderboard();loadTournament();console.log(`‚úÖ –î–ï–ú–û ${username} ‚úì`)}catch(e){console.error(e)}}
        
        function showModal(type){document.getElementById('authModal').style.display='block';document.getElementById('modalTitle').textContent=type==='login'?'üîë –í—Ö–æ–¥':'üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';document.getElementById('username').focus()}
        function closeAuth(){document.getElementById('authModal').style.display='none';document.getElementById('username').value='';document.getElementById('password').value=''}
        
        async function submitAuth(){const username=document.getElementById('username').value.trim(),password=document.getElementById('password').value;if(!username||!password){alert('üë§ –ò–º—è –∏ üîí –ø–∞—Ä–æ–ª—å!');return}const endpoint=document.getElementById('modalTitle').textContent.includes('–í—Ö–æ–¥')?'/login':'/register';try{const res=await fetch(endpoint,{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({username,password})});const data=await res.json();if(data.success){document.getElementById('status').innerHTML=`üëã ${username} ‚úì`;document.getElementById('logout').style.display='inline-block';closeAuth();loadLeaderboard();loadTournament()}else{alert(data.error||'‚ùå –û—à–∏–±–∫–∞')}}catch(err){alert('‚ùå –°–µ—Ä–≤–µ—Ä')}}
        
        async function logoutUser(){console.log('üö™ –í–´–•–û–î');try{await fetch('/logout',{method:'POST',credentials:'include'});document.getElementById('status').innerHTML='üîí –ì–æ—Å—Ç—å';document.getElementById('logout').style.display='none';loadLeaderboard();loadTournament()}catch(e){location.reload()}}
        
        async function loadLeaderboard(){try{const res=await fetch('/leaderboard'),top=await res.json();document.getElementById('leaderboard-list').innerHTML=top.length?top.map((p,i)=`<div class="list-item"><span>#${i+1} ${p.username}</span><span>${p.score.toLocaleString()}</span></div>`).join(''):'<div class="list-item">–ü—É—Å—Ç–æ üò¥</div>'}catch(e){document.getElementById('leaderboard-list').innerHTML='‚ùå'}}
        async function loadTournament(){try{const res=await fetch('/tournament'),top=await res.json();document.getElementById('tournament-list').innerHTML=top.length?top.map((p,i)=`<div class="list-item"><span>#${i+1} ${p.username}</span><span>${p.score.toLocaleString()}</span></div>`).join(''):'<div class="list-item">–ù–∏–∫—Ç–æ</div>'}catch(e){document.getElementById('tournament-list').innerHTML='‚ùå'}}
        
        // üêç –ó–ú–ï–ô–ö–ê + üéØ –£–ì–ê–î–ê–ô–ö–ê (–ø–æ–ª–Ω—ã–π –∫–æ–¥ –∫–∞–∫ —Ä–∞–Ω—å—à–µ)
        function loadSnakeGame(){/*...–ø–æ–ª–Ω—ã–π –∫–æ–¥ –∑–º–µ–π–∫–∏...*/}
        function loadGuessGame(){/*...–ø–æ–ª–Ω—ã–π –∫–æ–¥ —É–≥–∞–¥–∞–π–∫–∏...*/}
        // ... (–æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∏–≥—Ä)
    </script>
</body>
</html>
